(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Add"],{"99ce":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-form",{attrs:{form:e.form,autocomplete:"off"},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"分组名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名称"},{max:20,message:"请输入20个字以内"}],initialValue:e.formVal.title}],expression:"[\n          'name',\n          {rules: [{ required: true, message: '请输入名称' },\n          { max:20, message: '请输入20个字以内'}],\n          initialValue: formVal.title}\n        ]"}],attrs:{placeholder:"20个字以内"}})],1),a("a-form-item",{attrs:{label:"备注",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!1,message:"请输入角色备注"},{max:50,message:"请输入50个字以内"}],initialValue:e.formVal.description}],expression:"[\n          'description',\n          {rules: [{ required: false, message: '请输入角色备注' },\n          { max:50, message: '请输入50个字以内'}\n          ],initialValue: formVal.description}\n        ]"}],attrs:{rows:"4",placeholder:"请输入角色备注，50个字以内"}})],1),a("a-form-item",{attrs:{label:"是否启用",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-checkbox",{attrs:{checked:e.formVal.status},on:{change:e.handleStatus}},[e._v("\n              启用\n          ")]),a("a-button",{staticClass:"mr",on:{click:function(t){return e.$refs.addMember.add()}}},[e._v("添加组员")]),e._l(e.memberNames,function(t,r){return[a("a-tag",{key:t,attrs:{closable:r>-1,afterClose:function(){return e.handleClose(t)}}},[e._v("\n                  "+e._s(t)+"\n              ")])]})],2),a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("提交")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.cancel}},[e._v("取消")])],1)],1),a("add-member",{ref:"addMember",on:{ok:e.handleOk}})],1)},n=[],s=a("75fc"),i=(a("7f7f"),a("b4f6")),o=a("b775"),l={name:"BaseForm",components:{AddMember:i["a"]},data:function(){return{description:"表单页用于向用户收集或验证信息，基础表单常见于数据项较少的表单场景。",value:1,form:this.$form.createForm(this),formVal:{title:"",description:"",status:!0},id:"",memberNames:[],memberIds:[],allMemberData:[]}},methods:{handleStatus:function(){this.formVal.status=!this.formVal.status},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){console.log("Received values of form: ",a),t.formVal.status?a.status="1":a.status="2";var r=t.memberIds.join(",");o["b"].post("/api/user_group/saveData",{title:a.name,id:t.id,status:a.status,description:a.description,gusers:r}).then(function(e){"200"===e.Code&&(t.$message.success("修改成功"),t.$router.push({name:"Manage"}))},function(e){console.log(e)}).catch(function(e){console.log(e)})}})},handleClose:function(e){for(var t=this.allMemberData,a="",r=0;r<t.length;r++)t[r].member_name===e&&(a=t[r].id);var n=this.memberIds.indexOf(a);this.memberIds.splice(n,1);var s=this.memberNames.filter(function(t){return t!==e});this.memberNames=s},cancel:function(){var e=this;this.$confirm("是否放弃新增?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:"Manage"})})},handleOk:function(e){this.memberIds.push(e.id),this.allMemberData.push(e);var t=e.member_name,a=this.memberNames;t&&-1===a.indexOf(t)&&(a=[].concat(Object(s["a"])(a),[t])),Object.assign(this,{memberNames:a,inputVisible:!1,inputValue:""})}}},m=l,c=(a("ba68"),a("2877")),u=Object(c["a"])(m,r,n,!1,null,"efb1836c",null);t["default"]=u.exports},b4f6:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"添加组员",width:640,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"账号名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["member_name",{initialValue:e.memberName}],expression:"[\n              'member_name',\n              {initialValue: memberName}\n            ]"}],attrs:{type:"text",placeholder:"请输入"}}),a("div",[e._v('如需添加多条，请以英文逗号","分割')])],1)],1)],1)],1)},n=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("2f62"),o=a("b775");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach(function(t){Object(s["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var c={data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),memberName:"",memberId:""}},methods:m({},Object(i["b"])(["ChangePassword"]),{checkAccount:function(e,t,a){var r=this;o["b"].post("/api/user_group/bindUser",{username:t}).then(function(e){"200"===e.Code?(r.memberId=e.Data.id,a()):a(e.Msg)},function(e){console.log(e)}).catch(function(e){console.log(e)})},add:function(){this.visible=!0},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.getFieldValue("member_name");String(a)&&o["b"].post("/api/user_group/bindUser",{username:a}).then(function(e){if("200"===e.Code){t.visible=!1,t.confirmLoading=!1;var r={member_name:a,id:e.Data.id};t.$emit("ok",r),t.$message.success("添加成功")}})},handleCancel:function(){this.handleReset(),this.visible=!1},handleReset:function(){this.memberName="",this.memberId="",this.form.resetFields()}})},u=c,d=a("2877"),f=Object(d["a"])(u,r,n,!1,null,null,null);t["a"]=f.exports},ba68:function(e,t,a){"use strict";var r=a("df23"),n=a.n(r);n.a},df23:function(e,t,a){}}]);