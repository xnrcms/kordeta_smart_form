(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddMenu"],{"067b":function(e,t,a){},"2d75":function(e,t,a){"use strict";var i=a("067b"),n=a.n(i);n.a},"33cf":function(e,t,a){"use strict";var i=a("c2e6"),n=a.n(i);n.a},"3e88":function(e,t,a){},"889e":function(e,t,a){"use strict";var i=a("88a8"),n=a.n(i);n.a},"88a8":function(e,t,a){},c2e6:function(e,t,a){},d1f7:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return n});var i=["table","form","profile","user","exception","star"],n=[{id:"a",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372705&di=3a8ee36bed8f51b1fed0aea6f6023104&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Feaa2c171fd58547ac59abdefa5984874777cdd7047beb-bQp2et_fw658"},{id:"b",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372705&di=74c7287c2c5ed67eaa5d59e27f46c709&imgtype=0&src=http%3A%2F%2Fimg3.duitang.com%2Fuploads%2Fitem%2F201603%2F31%2F20160331224940_ZcePS.jpeg"},{id:"c",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372703&di=e3a815f04394bda7f6e5b2cd0694a28d&imgtype=0&src=http%3A%2F%2Fp.ee21.cn%2Fimg%2F1%2F59789%2F2603042003263622488333.jpg"},{id:"d",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372703&di=603666f93368be615cab4e2c7a15cc01&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F40be1fd2462afb92bc0fdb90dfb81a9c351927cf2ec37-x4fhCm_fw658"},{id:"e",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930456609&di=9924ae5ec386a466f8c7652143ef0535&imgtype=jpg&src=http%3A%2F%2Fimg2.imgtn.bdimg.com%2Fit%2Fu%3D1308493732%2C1093276184%26fm%3D214%26gp%3D0.jpg"},{id:"f",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372702&di=56196741e5231622db9a5b90a8b7b467&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F1eb658a6d26c09bd4ee47a8b3ad95c774361a43922f98-oRrSN3_fw658"},{id:"g",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372701&di=9dae456ad132ec548d324590936b5440&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20180529%2F5422ede8217b4dffa4bd4ae7de4f6223.jpeg"},{id:"h",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372700&di=aa6e8cf1a935103b14634dace750ea22&imgtype=0&src=http%3A%2F%2Fpic8.nipic.com%2F20100720%2F5413592_143617031849_2.jpg"},{id:"i",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372721&di=9bf1b30d6a05773b6bfaeed670e9d170&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201608%2F07%2F20160807093257_feAws.jpeg"},{id:"j",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562930372721&di=bd5f910abee549607809d3be51b99a93&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201806%2F09%2F20180609212022_sSeUr.thumb.700_0.jpeg"}]},d39d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{"body-style":{padding:"24px 32px"},bordered:!1}},[a("a-form",{attrs:{form:e.form,autocomplete:"off"},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"菜单名称",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.baseForm.title,rules:[{required:!0,message:"请输入菜单名称"},{max:10,message:"10个字符之内"}]}],expression:"[\n                        'title',\n                        {\n                            initialValue: baseForm.title,\n                            rules: [\n                                { required: true, message: '请输入菜单名称' },\n                                {max: 10, message: '10个字符之内'}\n                            ]\n                        }\n                    ]"}],attrs:{name:"name",placeholder:"10个字以内"}})],1),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"打开方式",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:17},sm:{span:17}}}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["open_type",{initialValue:e.baseForm.open_type,rules:[{required:!0,message:"请选择打开方式"}]}],expression:"[\n                    'open_type',\n                    {\n                        initialValue: baseForm.open_type,\n                        rules: [{ required: true, message: '请选择打开方式' }]\n                    }\n                ]"}]},[a("a-radio",{attrs:{value:0}},[e._v("在当前页面打开")]),a("a-radio",{attrs:{value:1}},[e._v("在新页面打开")])],1)],1),a("a-form-item",{attrs:{label:"URL类型",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:17},sm:{span:17}}}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["url_type",{initialValue:e.baseForm.url_type,rules:[{required:!0,message:"请选择URL类型"}]}],expression:"[\n                    'url_type',\n                    {\n                        initialValue: baseForm.url_type,\n                        rules: [{ required: true, message: '请选择URL类型' }]\n                    }\n                ]"}]},[a("a-radio",{attrs:{value:0}},[e._v("内链 "),a("span",{staticClass:"tip"},[e._v("（通过表单关联菜单内容）")])]),a("a-radio",{attrs:{value:1}},[e._v("外链 "),a("span",{staticClass:"tip"},[e._v("（可打开外部链接地址）")])]),a("a-radio",{attrs:{value:2}},[e._v("无链接 "),a("span",{staticClass:"tip"},[e._v("（点击后，仅展开子菜单）")])]),a("a-radio",{attrs:{value:3}},[e._v("嵌入代码 "),a("span",{staticClass:"tip"},[e._v("（支持复制iframe、script代码，在页面内部打开该代码内容）")])])],1)],1),e.showURL?a("a-form-item",{attrs:{label:"菜单链接",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{initialValue:e.baseForm.url,rules:[{required:!0,message:"请输入链接"},{max:100,message:"100个字符以内"},{type:"url",message:"请输入正确的网页链接"}]}],expression:"[\n                        'url',\n                        {\n                            initialValue: baseForm.url,\n                            rules: [\n                                { required: true, message: '请输入链接' },\n                                { max: 100, message: '100个字符以内'},\n                                { type: 'url', message: '请输入正确的网页链接'}\n                            ]\n                        }\n                    ]"}],attrs:{name:"url",placeholder:"请输入菜单链接"}})],1):e._e(),e.isCode?a("a-form-item",{attrs:{label:"复制代码",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{initialValue:e.baseForm.code,rules:[{required:!0,message:"请输入代码"}]}],expression:"[\n                    'code',\n                    {\n                        initialValue: baseForm.code,\n                        rules: [\n                            { required: true, message: '请输入代码' }\n                        ]\n                    }\n                ]"}],attrs:{rows:4,placeholder:"请复制其他页面的iframe代码或script代码，粘贴到该处，请保证代码正确，否则可能影响展示效果"}})],1):e._e(),a("a-form-item",{attrs:{label:"上级菜单",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("MenuTree",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{initialValue:e.pInfo.id,rules:[{required:!0,type:"number",message:"请选择上级菜单"}]}],expression:"[\n                        'pid',\n                        {\n                            initialValue: pInfo.id,\n                            rules: [{ required: true, type: 'number', message: '请选择上级菜单' }]\n                        }\n                    ]"}],attrs:{treeData:e.data,nodeLevel:0,nodeInfo:e.pInfo},on:{nodeClick:e.getPreMenu,visibleHandle:e.visibleHandle}})],1),e.showOpt?a("a-form-item",{attrs:{label:"数据操作",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",[a("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["operation",{initialValue:e.baseForm.operation}],expression:"[\n                            'operation',\n                            {\n                                initialValue: baseForm.operation\n                            }\n                        ]"}],attrs:{defaultChecked:"true",options:[{label:"新增",value:"1"},{label:"查看",value:"2"},{label:"编辑",value:"3"},{label:"删除",value:"4"},{label:"导入",value:"5"},{label:"导出",value:"6"}]}}),a("div",{staticClass:"tip",staticStyle:{"line-height":"1"}},[e._v("选中后将会以按钮形式显示在菜单页面，点击后可进入对应操作页面")])],1)]):e._e(),a("a-form-item",{attrs:{label:"是否启用",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.baseForm.status,valuePropName:"checked"}],expression:"[\n                    'status',\n                    {\n                        initialValue: baseForm.status,\n                        valuePropName: 'checked'\n                    }\n                ]"}],attrs:{checkedChildren:"是",unCheckedChildren:"否"}})],1),a("a-form-item",{attrs:{label:"排序",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:e.baseForm.sort,rules:[{max:5,message:"5个字符之内"},{pattern:/^[0-9]\d*$/,message:"只能输入数字"}]}],expression:"[\n                    'sort',\n                    {\n                        initialValue: baseForm.sort,\n                        rules: [\n                            {max: 5, message: '5个字符之内'},\n                            {pattern: /^[0-9]\\d*$/, message: '只能输入数字'}\n                        ]\n                    }\n                ]"}],attrs:{placeholder:"数字越大，表示菜单在越前面"}})],1),a("a-form-item",{attrs:{label:"菜单描述",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["describe",{initialValue:e.baseForm.describe,rules:[{max:50,message:"50个字符之内"}]}],expression:"[\n                    'describe',\n                    {\n                        initialValue: baseForm.describe,\n                        rules: [\n                            {max: 50, message: '50个字符之内'}\n                        ]\n                    }\n                ]"}],attrs:{placeholder:"请输入50个字以内的描述文案，将用于卡片视图展示"}})],1),a("a-form-item",{attrs:{label:"菜单图标",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{initialValue:e.baseForm.icon}],expression:"[\n                        'icon',\n                        {\n                            initialValue: baseForm.icon\n                        }\n                    ]"}]},e._l(e.menuIcon,function(e){return a("a-radio",{key:e,attrs:{value:e}},[a("a-icon",{attrs:{type:e}})],1)}),1),a("div",{staticClass:"tip",staticStyle:{"line-height":"1"}},[e._v("用于列表展示时菜单名称前的图标")])],1)]),a("a-form-item",{attrs:{label:"卡片图标",labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:17}}}},[a("div",[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon2",{initialValue:e.baseForm.icon2}],expression:"[\n                        'icon2',\n                        {\n                            initialValue: baseForm.icon2\n                        }\n                    ]"}]},e._l(e.cardIcon,function(e){return a("a-radio",{key:e.id,attrs:{value:e.id}},[a("a-avatar",{attrs:{shape:"square",src:e.src,size:"large"}})],1)}),1),a("div",{staticClass:"tip",staticStyle:{"line-height":"1"}},[e._v("用于卡片展示时菜单名称前的图标")])],1)]),a("a-form-item",{staticStyle:{"text-align":"center"},attrs:{wrapperCol:{span:24}}},[a("a-button",{attrs:{htmlType:"submit",type:"primary"}},[e._v("提交")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},n=[],s=(a("7514"),a("28a5"),a("55dd"),a("b775")),r=a("2971"),o=a("5d2d"),l=a("e2a5"),c=(a("ac6a"),a("7618")),d=function e(t,a,i,n){if(t===a)return 0!==t||1/t===1/a;if(null==t||null==a)return t===a;t instanceof _&&(t=t._wrapped),a instanceof _&&(a=a._wrapped);var s=toString.call(t);if(s!==toString.call(a))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t===""+a;case"[object Number]":return+t!==+t?+a!==+a:0===+t?1/+t===1/a:+t===+a;case"[object Date]":case"[object Boolean]":return+t===+a}if("object"!=Object(c["a"])(t)||"object"!=Object(c["a"])(a))return!1;var r=i.length;while(r--)if(i[r]===t)return n[r]===a;var o,l,d=t.constructor,u=a.constructor;if(d!==u&&"constructor"in t&&"constructor"in a&&!(_.isFunction(d)&&d instanceof d&&_.isFunction(u)&&u instanceof u))return!1;if(i.push(t),n.push(a),"[object Array]"===s){if(o=t.length,l=o===a.length,l)while(o--)if(!(l=e(t[o],a[o],i,n)))break}else{var p,m=_.keys(t);if(o=m.length,l=_.keys(a).length===o,l)while(o--)if(p=m[o],!(l=_.has(a,p)&&e(t[p],a[p],i,n)))break}return i.pop(),n.pop(),l},u=function(e,t){return d(e,t,[],[])},p=u,m=a("5118"),b=a("d1f7"),h=null,g={name:"AddMenu",components:{MenuTree:l["a"]},data:function(){return{form:this.$form.createForm(this,{onValuesChange:this.onValuesChange}),data:[],pInfo:{},baseForm:{title:"",open_type:0,url_type:0,url:"",pid:0,operation:[],status:!0,sort:"",describe:"",icon:b["b"][0]||"",icon2:b["a"][0].id||"",code:""},showURL:!1,showOpt:!0,cardIcon:b["a"],menuIcon:b["b"],isCode:!1}},computed:{optType:function(){return this.$route.params.type},id:function(){return this.$route.params.id||""}},created:function(){this.getMenuList(),"edit"===this.optType&&this.id&&this.initData(this.id)},methods:{initData:function(e){var t=this;s["b"].post("/admin/Devmenu/detailData",{uid:Object(o["b"])("UID"),hashid:Object(o["b"])("HASHID"),id:e}).then(function(e){if(console.log(e),"200"==e.Code){var a=e.Data,i=a.title,n=a.open_type,s=a.url_type,r=a.url,o=a.pid,l=a.operation,c=a.status,d=a.sort,u=a.describe,p=a.icon,m=a.icon2;t.baseForm={title:i,open_type:n,url_type:s,url:1==s?r:"",pid:o,operation:l.split(","),status:1==c,sort:String(d),describe:u,icon:p||b["b"][0],icon2:m||b["a"][0].id,code:3==s?r:""},1==s&&(t.showURL=!0),t.showOpt=0==s,t.isCode=3==s}})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(console.log(a),!e){var i=JSON.parse(JSON.stringify(a));i.operation&&(i.operation=i.operation.filter(function(e){return e}).join(",")),i.status=i.status?1:2,i.sort=i.sort||1,0==i.url_type?i.url="/listtpl/getlist":2==i.url_type?i.url="###":3==i.url_type&&(i.url=i.code,delete i.code),s["b"].post("/admin/Devmenu/saveData",Object.assign({},{uid:Object(o["b"])("UID"),hashid:Object(o["b"])("HASHID")},{id:"edit"==t.optType?t.id:"",icon:"",fsize:"",sort:"",posttype:"",pos:"1",operation:""},i)).then(function(e){console.log(e),"200"===e.Code&&(t.$notification["success"]({message:"提示:",description:"add"===t.optType?"添加成功":"更新成功"}),t.$router.push("/designCenter/menu-design/menu"))})}})},getPreMenu:function(e){console.log(e),this.id&&this.id==e.id?this.$message.warning("上级菜单无法选择自身"):this.pInfo=e},onValuesChange:function(e,t){t.hasOwnProperty("url_type")&&(1==t.url_type?(this.baseForm.url="",this.showURL=!0):this.showURL=!1,0==t.url_type?this.showOpt=!0:this.showOpt=!1,3==t.url_type?(this.baseForm.url="",this.isCode=!0):this.isCode=!1)},cancel:function(){var e=this;console.log("cancel");var t=this.form.getFieldsValue();0!=t.url_type&&2!=t.url_type||(t.url=""),p(t,this.baseForm)?this.$router.go(-1):(console.log("not eq"),this.$confirm("取消后将不保存修改后的内容","确定取消?",{type:"warning"}).then(function(){e.$router.go(-1)}))},getMenuList:function(){var e=this;s["b"].post("/admin/Devmenu/listData",{page:"",search:""}).then(function(t){if(console.log(t.Data.lists),e.data=[{title:"顶级菜单",id:0,children:Object(r["a"])(t.Data.lists)}],e.id){var a=t.Data.lists.find(function(t){return t.id==e.id});"add"===e.optType?(e.pInfo=a,e.baseForm.pid=a.id):e.pInfo=t.Data.lists.find(function(e){return e.id==a.pid})||{title:"顶级菜单",id:0}}else e.pInfo={title:"顶级菜单",id:0},e.baseForm.pid=0}).finally(function(){h&&(h=null)})},visibleHandle:function(e){var t=this;console.log(e),console.log(h),e&&(h||this.data.length||(h=Object(m["setTimeout"])(function(){t.getMenuList()},500)))}}},f=g,v=(a("33cf"),a("2877")),y=Object(v["a"])(f,i,n,!1,null,"5cc56b44",null);t["default"]=y.exports},e2a5:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree"},[a("a-popover",{attrs:{placement:"rightTop",overlayClassName:"tree-popover"},on:{visibleChange:e.visibleChange}},[a("template",{slot:"content"},[e.treeData.length?e._e():a("div",{staticClass:"no-data"},[e._v("暂无数据")]),a("TreeNode",{attrs:{treeData:e.treeData,nodeLevel:e.nodeLevel,activeNodeId:e.activeNodeId},on:{nodeClick:e.nodeClick}})],1),a("a-input",{attrs:{placeholder:e.placeholderInner,readOnly:!0,value:e.title},on:{change:e.handleChange}},[a("a-icon",{style:{color:"#999"},attrs:{slot:"suffix",type:e.down?"down":"up"},slot:"suffix"})],1)],2)],1)},n=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree"},e._l(e.treeData,function(t,i){return a("div",{key:t.id},[a("div",{staticClass:"tree-item",class:{active:t.id==e.activeNodeId},style:e.style,attrs:{href:"javascript:;"},on:{click:function(a){return e.nodeClick(t)}}},[t.children?a("a-icon",{attrs:{type:e.openNode[i]?"caret-up":"caret-down"},on:{click:function(t){return t.stopPropagation(),e.visChildren(i)}}}):e._e(),e._v("\n            "+e._s(t.title)+"\n        ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.openNode[i],expression:"openNode[index]"}]},[t.children&&t.children.length?a("TreeNode",{attrs:{treeData:t.children,nodeLevel:e.nodeLevel+1,activeNodeId:e.activeNodeId},on:{nodeClick:e.nodeClick}}):e._e()],1)])}),0)},r=[],o=(a("6c7b"),{name:"TreeNode",props:["treeData","nodeLevel","activeNodeId"],data:function(){return{openNode:[]}},computed:{style:function(){return{paddingLeft:20*this.nodeLevel+"px"}}},watch:{treeData:{handler:function(){var e=new Array(this.treeData.length).fill(!0);this.$set(this,"openNode",e)},deep:!0}},mounted:function(){var e=new Array(this.treeData.length).fill(!0);this.$set(this,"openNode",e)},methods:{visChildren:function(e){var t=this.openNode[e];this.$set(this.openNode,e,!t)},nodeClick:function(e){this.$emit("nodeClick",e)}}}),l=o,c=(a("e898"),a("2877")),d=Object(c["a"])(l,s,r,!1,null,"15b7a835",null),u=d.exports,p={name:"MenuTree",components:{TreeNode:u},props:["treeData","nodeLevel","nodeInfo","placeholder"],data:function(){var e=this.nodeInfo;return{down:!1,title:e.title,activeNodeId:e.id}},computed:{placeholderInner:function(){return this.placeholder?this.placeholder:"请选择上级菜单"}},watch:{nodeInfo:function(e){this.title=e.title,this.activeNodeId=e.id,this.triggerChange(e.id)}},mounted:function(){this.title=this.nodeInfo.title,this.activeNodeId=this.nodeInfo.id},methods:{nodeClick:function(e){this.$emit("nodeClick",e)},visibleChange:function(e){this.down=!e,this.$emit("visibleHandle",e)},handleChange:function(e){this.triggerChange(this.nodeInfo.id)},triggerChange:function(e){this.$emit("change",e)}}},m=p,b=(a("889e"),a("2d75"),Object(c["a"])(m,i,n,!1,null,"a1e2e332",null));t["a"]=b.exports},e898:function(e,t,a){"use strict";var i=a("3e88"),n=a.n(i);n.a}}]);